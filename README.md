# PNG è½¬ WebP è½¬æ¢å™¨

ä¸€ä¸ªåŸºäº Next.js çš„åœ¨çº¿å›¾ç‰‡æ ¼å¼è½¬æ¢å·¥å…·ï¼Œæ”¯æŒ PNG/JPG è½¬æ¢ä¸º WebP æ ¼å¼ï¼Œå¯éƒ¨ç½²åœ¨ Cloudflare Pagesã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **å¿«é€Ÿè½¬æ¢** - åŸºäºæµè§ˆå™¨ Canvas APIï¼Œæ— éœ€æœåŠ¡å™¨å¤„ç†
- ğŸ”’ **éšç§ä¿æŠ¤** - æ‰€æœ‰å›¾ç‰‡å¤„ç†åœ¨æœ¬åœ°å®Œæˆï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨
- ğŸ“¦ **æ‰¹é‡å¤„ç†** - æ”¯æŒä¸€æ¬¡è½¬æ¢å¤šä¸ªå›¾ç‰‡æ–‡ä»¶
- ğŸ¨ **é«˜çº§è®¾ç½®** - è‡ªå®šä¹‰è½¬æ¢è´¨é‡å’Œè°ƒæ•´å›¾ç‰‡å°ºå¯¸
- ğŸ’° **å®Œå…¨å…è´¹** - é›¶æˆæœ¬éƒ¨ç½²å’Œä½¿ç”¨
- ğŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨ç«¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—® http://localhost:3000
```

### æ„å»ºé¡¹ç›®

```bash
# æ„å»º
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

## ğŸŒ Cloudflare Pages éƒ¨ç½²

### âš ï¸ é‡è¦æç¤º

**å½“å‰é…ç½®**: Next.js 14 + App Router
**éƒ¨ç½²æ–¹å¼**: æ ‡å‡†æ„å»ºï¼ˆæ”¯æŒ API è·¯ç”±å’Œä¸­é—´ä»¶ï¼‰
**æ„å»ºè¾“å‡º**: `.next` ç›®å½•

### æ–¹æ³• 1: GitHub è¿æ¥ï¼ˆæœ€æ¨èï¼‰

1. **æ¨é€ä»£ç åˆ° GitHub**
   ```bash
   git add .
   git commit -m "éƒ¨ç½²åˆ° Cloudflare Pages"
   git push origin main
   ```

2. **Cloudflare Dashboard è®¾ç½®**
   - è®¿é—® https://dash.cloudflare.com
   - Workers & Pages â†’ Create â†’ Pages
   - é€‰æ‹© **Connect to Git**
   - é€‰æ‹©ä½ çš„ä»“åº“ `wuyueerhao/pngtowebp`

3. **æ„å»ºé…ç½®**
   ```
   æ„å»ºå‘½ä»¤: npm run build
   æ„å»ºè¾“å‡ºç›®å½•: .next
   æ ¹ç›®å½•: /
   ```

4. **ä¿å­˜å¹¶éƒ¨ç½²**

### æ–¹æ³• 2: Wrangler CLI

```bash
# å®‰è£… Wrangler
npm install -g wrangler

# ç™»å½•
wrangler login

# æ„å»º
npm run build

# éƒ¨ç½²
wrangler pages deploy .next --project-name=pngtowebp

# è®¿é—®: https://pngtowebp.pages.dev
```

### æ–¹æ³• 3: ç›´æ¥ä¸Šä¼ 

1. è¿è¡Œ `npm run build`
2. åœ¨ Cloudflare Pages åˆ›å»ºé¡¹ç›®
3. ä¸Šä¼  `.next` æ–‡ä»¶å¤¹çš„**æ‰€æœ‰å†…å®¹**
4. è®¾ç½®æ„å»ºå‘½ä»¤: `npm run build`

### ğŸ› éƒ¨ç½²åé¡µé¢ç©ºç™½ï¼Ÿ

**å¿«é€Ÿè§£å†³**:
```bash
# é‡æ–°æ„å»º
rm -rf .next
npm run build

# æ£€æŸ¥æ„å»ºè¾“å‡º
ls .next/server/app/
# åº”è¯¥çœ‹åˆ°: index.html, advanced.html, about.html
```

**å¸¸è§é—®é¢˜**:
- **wrangler è­¦å‘Š**: å¯å¿½ç•¥ï¼Œä¸å½±å“éƒ¨ç½²
- **é¡µé¢ç©ºç™½**: é‡æ–°æ„å»ºå¹¶ç¡®ä¿ä¸Šä¼  `.next` å†…å®¹
- **404 é”™è¯¯**: æ£€æŸ¥æ˜¯å¦ä¸Šä¼ äº†æ­£ç¡®çš„æ–‡ä»¶

## ğŸ“ é¡¹ç›®ç»“æ„

```
pngtowebp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx              # ä¸»é¡µ
â”‚   â”‚   â”œâ”€â”€ advanced/page.tsx     # é«˜çº§è½¬æ¢å™¨
â”‚   â”‚   â”œâ”€â”€ about/page.tsx        # å…³äºé¡µé¢
â”‚   â”‚   â”œâ”€â”€ not-found.tsx         # 404 é¡µé¢
â”‚   â”‚   â”œâ”€â”€ layout.tsx            # å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ manifest.ts           # PWA é…ç½®
â”‚   â”‚   â””â”€â”€ icon.tsx              # App Icon
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ImageConverter.tsx    # åŸºç¡€è½¬æ¢å™¨
â”‚   â”‚   â””â”€â”€ AdvancedConverter.tsx # é«˜çº§è½¬æ¢å™¨
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ globals.css           # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ middleware.ts             # å®‰å…¨ä¸­é—´ä»¶
â”œâ”€â”€ package.json
â”œâ”€â”€ next.config.js                # Next.js é…ç½®
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ wrangler.toml                 # Cloudflare é…ç½®
â”œâ”€â”€ deploy.sh                     # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ test-setup.sh                 # ç¯å¢ƒæµ‹è¯•
â””â”€â”€ README.md                     # æœ¬æ–‡ä»¶
```

## ğŸ¯ åŠŸèƒ½è¯´æ˜

### åŸºç¡€è½¬æ¢å™¨ (`/`)
- æ‹–æ‹½ä¸Šä¼ å›¾ç‰‡
- æ‰¹é‡å¤„ç†æ”¯æŒ
- å®æ—¶è¿›åº¦æ˜¾ç¤º
- ä¸‹è½½è½¬æ¢åçš„ WebP

### é«˜çº§è½¬æ¢å™¨ (`/advanced`)
- è´¨é‡è°ƒæ•´ (1-100%)
- å°ºå¯¸è°ƒæ•´ (å®½åº¦/é«˜åº¦)
- ä¿æŒå®½é«˜æ¯”
- æ‰¹é‡é«˜çº§å¤„ç†

### å…³äºé¡µé¢ (`/about`)
- é¡¹ç›®ä»‹ç»
- ä½¿ç”¨æŒ‡å—
- éšç§è¯´æ˜

## ğŸ”’ éšç§ä¿æŠ¤

**æ‰€æœ‰å›¾ç‰‡å¤„ç†åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆ**ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚è¿™ç¡®ä¿äº†ï¼š
- âœ… 100% æ•°æ®éšç§
- âœ… æ— éœ€æ‹…å¿ƒæ•°æ®æ³„éœ²
- âœ… é€‚åˆå¤„ç†æ•æ„Ÿå›¾ç‰‡
- âœ… èŠ‚çœæœåŠ¡å™¨å¸¦å®½

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| ç‰¹æ€§ | æµè§ˆå™¨ Canvas | æœåŠ¡å™¨ cwebp |
|------|---------------|--------------|
| è½¬æ¢é€Ÿåº¦ | âš¡ å¿« 2-3 å€ | è¾ƒæ…¢ |
| æˆæœ¬ | ğŸ’° å®Œå…¨å…è´¹ | æœ‰è´¹ç”¨ |
| éšç§ | ğŸ”’ 100% æœ¬åœ° | éœ€ä¸Šä¼  |
| éƒ¨ç½² | âœ… ç®€å• | å¤æ‚ |

**ç»“è®º**: æµè§ˆå™¨ Canvas æ–¹æ¡ˆåœ¨é€Ÿåº¦ã€æˆæœ¬ã€éšç§ä¸Šå…¨é¢ä¼˜äºæœåŠ¡å™¨æ–¹æ¡ˆã€‚

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
npm install          # å®‰è£…ä¾èµ–
npm run dev          # å¼€å‘æœåŠ¡å™¨
npm run build        # æ„å»ºé¡¹ç›®
npm start            # ç”Ÿäº§å¯åŠ¨
npm run lint         # ä»£ç æ£€æŸ¥
./test-setup.sh      # ç¯å¢ƒæµ‹è¯•
./deploy.sh          # éƒ¨ç½²è„šæœ¬
```

## ğŸ”§ ç¯å¢ƒå˜é‡ (å¯é€‰)

åœ¨ Cloudflare Dashboard ä¸­é…ç½®ï¼š

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `NEXT_PUBLIC_MAX_FILE_SIZE` | æœ€å¤§æ–‡ä»¶å¤§å° | `50MB` |
| `NEXT_PUBLIC_MAX_BATCH_SIZE` | æœ€å¤§æ‰¹é‡æ•°é‡ | `20` |

## ğŸ› å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆè½¬æ¢é€Ÿåº¦è¿™ä¹ˆå¿«ï¼Ÿ**
A: ä½¿ç”¨æµè§ˆå™¨ Canvas API ç¡¬ä»¶åŠ é€Ÿï¼Œæ— éœ€ç½‘ç»œä¼ è¾“ã€‚

**Q: æœ‰æ–‡ä»¶å¤§å°é™åˆ¶å—ï¼Ÿ**
A: å–å†³äºæµè§ˆå™¨å†…å­˜ï¼Œå»ºè®®å¤„ç† < 50MB çš„æ–‡ä»¶ã€‚

**Q: æ”¯æŒå“ªäº›æ ¼å¼ï¼Ÿ**
A: è¾“å…¥: PNG, JPG, JPEG, WebP, GIF â†’ è¾“å‡º: WebP

**Q: ä¸ºä»€ä¹ˆé€‰æ‹© Cloudflare Pagesï¼Ÿ**
A: å…è´¹ã€å¿«é€Ÿã€å…¨çƒ CDNã€è‡ªåŠ¨ HTTPSã€æ˜“äºéƒ¨ç½²ã€‚

**Q: wrangler.toml è­¦å‘Šæ€ä¹ˆåŠï¼Ÿ**
A: è¿™ä¸ªè­¦å‘Šä¸å½±å“éƒ¨ç½²ï¼Œå¯ä»¥å¿½ç•¥æˆ–åˆ é™¤è¯¥æ–‡ä»¶ã€‚

**Q: éƒ¨ç½²åé¡µé¢ç©ºç™½ï¼Ÿ**
A: é‡æ–°æ„å»º (`rm -rf .next && npm run build`) å¹¶é‡æ–°éƒ¨ç½²ã€‚

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

æŸ¥çœ‹é¡¹ç›®ä¸­çš„ `PROGRESS.md` äº†è§£é¡¹ç›®è¿›åº¦å’Œè¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License

---

**Made with â¤ï¸ for Cloudflare Pages**